<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/styles/HomePage.css" />
  <link rel="stylesheet" href="/styles/Banner.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/js/toggleDropdown.js" defer></script>
  <title>Investify</title>
</head>

<body>
  <%- include("partials/header.ejs") %>

    <!-- Main Container -->
    <main id="container">
      <div id="portfolioBox">
        <div>
          <h6>Your Portfolio</h6>
          <p id="username">
            <%= locals.username %>'s account
          </p>
        </div>

        <div>
          <div id="informationItem">
            <p style="opacity: 0.65;">Settled Cash</p>
            <p>
              <%= account.settled_cash %>
            </p>
          </div>

          <div id="informationItem">
            <p style="opacity: 0.65;">Buying Power</p>
            <p>
              <%= account.buying_power %>
            </p>
          </div>

          <div id="informationItem">
            <p style="opacity: 0.65;">Dividends</p>
            <p>
              <%= account.dividends %>
            </p>
          </div>
        </div>

        <div id="buttonContainer">
          <button id="buttonItem"><span>Deposit</span></button>
          <button id="buttonItem"><span>Withdraw</span></button>
          <button id="buttonItem"><span>Sell All</span></button>
        </div>

        <div>
          <h6>Positions:</h6>


          <% if(locals.position){ %>
            <% position.forEach((item)=> { %>
              <div id="positionItem">
                <p>
                  <%= item.name %>
                </p>

                <% if(item.unrealized_gains> 0){ %>
                  <p style="color: #009933">+<%= item.unrealized_gains %>%<i class="fa-solid fa-arrow-trend-up"></i></p>
                  <% } else if (item.unrealized_gains < 0) { %>
                    <p style="color: #CC0000">
                      <%= item.unrealized_gains %>%<i class="fa-solid fa-arrow-trend-down"></i>
                    </p>
                    <% } else { %>
                      <%= item.unrealized_gains %>
                        <% } %>

              </div>
              <% }) %>
                <% } %>

        </div>
      </div>

      <div id="performanceGraph">
        <div id="titleContainer">
          <p style="opacity: 0.65; margin: 0;">Net Account Value</p>
          <h1>
            <%= account.balance %>
          </h1>
        </div>

        <div id="graphContainer">
          <div class="chart">
            <canvas id="lineGraph"></canvas>
          </div>

          <div class="chart">
            <canvas id="doughnutChart"></canvas>
          </div>
        </div>
      </div>

      <div id="recommendedBox">
        <h6>Recommended:</h6>

        <div id="recommendedItem">
          <p>AMC Entertainment Inc</p>
          <p>Test</p>
        </div>

        <div id="recommendedItem">
          <p>Marathon Digital</p>
          <p>Test</p>
        </div>

        <div id="recommendedItem">
          <p>Intel Corporation</p>
          <p>Test</p>
        </div>
      </div>

      <div id="dateBox">
        <button id="dateButton"><span>7 Days</span></button>
        <button id="dateButton"><span>Months to Date</span></button>
        <button id="dateButton" autofocus><span>1 Month</span></button>
        <button id="dateButton"><span>Year to Date</span></button>
        <button id="dateButton"><span>1 Year</span></button>
      </div>

      </div>
    </main>
    <script src="/js/chart.js"></script>
</body>

</html>